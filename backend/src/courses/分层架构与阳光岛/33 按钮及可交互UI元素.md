# æŒ‰é’®åŠå¯äº¤äº’UIå…ƒç´ 

<div class="video-container">
  <div id="bilibili" class="video-content">
    <!-- Bç«™åµŒå…¥ï¼šä½¿ç”¨ https æ˜ç¡®åè®®ï¼ˆé¿å… file:// æˆ– http å¯¼è‡´è¢«æµè§ˆå™¨æ‹¦æˆªï¼‰ -->
    <iframe
      class="video-frame"
      src="https://player.bilibili.com/player.html?bvid=BV1FmYSzgE8W&page=1&autoplay=0&danmaku=0&high_quality=1"
      width="100%"
      height="480"
      scrolling="no"
      frameborder="0"
      allowfullscreen>
    </iframe>
  </div>
</div>

[åœ¨ Bilibili ä¸Šè§‚çœ‹](https://www.bilibili.com/video/BV1FmYSzgE8W)

## ğŸ“Œ é—®é¢˜èƒŒæ™¯

æ¬¢è¿æ¥åˆ°ã€ŠC++æ¸¸æˆå¼€å‘ä¹‹æ—…ã€‹çš„ç¬¬33è¯¾ï¼åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å»ºç«‹äº†ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„HUDï¼Œä½†å®ƒè¿˜åªæ˜¯ä¸€ä¸ª"åªè¯»"çš„ä¿¡æ¯å±•ç¤ºæ¿ã€‚ä¸€ä¸ªå®Œæ•´çš„UIç³»ç»Ÿå¿…é¡»èƒ½å¤Ÿå“åº”ç”¨æˆ·çš„è¾“å…¥ï¼Œæ¯”å¦‚ç‚¹å‡»æŒ‰é’®ã€‚

### âš ï¸ å½“å‰çš„é—®é¢˜

```
åªè¯»UIç³»ç»Ÿï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å½“å‰UIï¼š                â”‚
â”‚ â¤ï¸â¤ï¸â¤ï¸  Score: 500     â”‚
â”‚                         â”‚
â”‚  [å¼€å§‹æ¸¸æˆ]             â”‚ â† æŒ‰é’®æ— æ³•ç‚¹å‡»
â”‚  [è®¾ç½®]                 â”‚ â† æ— äº¤äº’
â”‚  [é€€å‡º]                 â”‚ â† åªæ˜¯å›¾ç‰‡
â”‚                         â”‚
â”‚ âŒ æ— æ³•å“åº”é¼ æ ‡         â”‚
â”‚ âŒ æ— æ³•ç‚¹å‡»æŒ‰é’®         â”‚
â”‚ âŒ æ— æ³•å®ç°èœå•         â”‚
â”‚ âŒ ç¼ºå°‘äº¤äº’åé¦ˆ         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| é—®é¢˜ | è¯´æ˜ | å½±å“ |
|------|------|------|
| **æ— äº¤äº’èƒ½åŠ›** | UIå…ƒç´ æ— æ³•å“åº”é¼ æ ‡ | æ— æ³•å®ç°èœå• |
| **æ— çŠ¶æ€ç®¡ç†** | ä¸èƒ½å¤„ç†æ‚¬åœ/æŒ‰ä¸‹çŠ¶æ€ | ç¼ºå°‘åé¦ˆ |
| **ä»£ç æ··ä¹±** | ç”¨if-elseç®¡ç†çŠ¶æ€ | éš¾ä»¥ç»´æŠ¤ |
| **ä¸å¯æ‰©å±•** | æ¯ä¸ªæŒ‰é’®é‡å¤ä»£ç  | å¼€å‘å›°éš¾ |

### ğŸ’¡ è§£å†³æ–¹æ¡ˆï¼šçŠ¶æ€æ¨¡å¼ä¸äº¤äº’å¼UI

**æ ¸å¿ƒæ€æƒ³**ï¼š
1. ä½¿ç”¨çŠ¶æ€æ¨¡å¼ç®¡ç†UIäº¤äº’
2. åˆ›å»ºUIInteractiveåŸºç±»
3. å®ç°UIçŠ¶æ€æœº
4. æ„å»ºå¯å¤ç”¨çš„UIButton

```
äº¤äº’å¼UIæ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      UIElement           â”‚ â† æ‰€æœ‰UIåŸºç±»
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ ç»§æ‰¿
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚         â”‚
    â†“         â†“         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚UIPanel â”‚â”‚ UIInteractive    â”‚ â† äº¤äº’åŸºç±» âœ¨
â”‚UIImage â”‚â”‚ â€¢ state_         â”‚   çŠ¶æ€æœº
â”‚UILabel â”‚â”‚ â€¢ sprites_       â”‚   å¤šç²¾çµ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â€¢ sounds_        â”‚   éŸ³æ•ˆ
          â”‚ â€¢ clicked()      â”‚   å›è°ƒ
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ ç»§æ‰¿
                   â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   UIButton       â”‚ â† æŒ‰é’®æ§ä»¶ âœ¨
          â”‚ â€¢ callback_      â”‚   è‡ªå®šä¹‰è¡Œä¸º
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

çŠ¶æ€æœºé©±åŠ¨äº¤äº’ï¼
```

### ğŸ¯ æœ¬è¯¾ç›®æ ‡

| ç›®æ ‡ | è¯´æ˜ |
|------|------|
| **å­¦ä¹ çŠ¶æ€æ¨¡å¼** | ç†è§£çŠ¶æ€æ¨¡å¼åœ¨UIäº¤äº’ä¸­çš„åº”ç”¨ |
| **åˆ›å»ºUIInteractive** | è®¾è®¡å¯äº¤äº’UIå…ƒç´ çš„åŸºç±» |
| **å®ç°çŠ¶æ€æœº** | æ„å»ºNormal/Hover/PressedçŠ¶æ€ |
| **æ„å»ºUIButton** | å®ç°å®Œæ•´çš„æŒ‰é’®æ§ä»¶ |

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šçŠ¶æ€æ¨¡å¼

### ğŸ’¡ äº¤äº’çš„å¤æ‚æ€§ï¼šä¸ºä»€ä¹ˆéœ€è¦çŠ¶æ€æ¨¡å¼ï¼Ÿ

ä¸€ä¸ªç®€å•çš„æŒ‰é’®ï¼Œå…¶è¡Œä¸ºä¹Ÿæ¯”æˆ‘ä»¬æƒ³è±¡çš„è¦å¤æ‚ã€‚è€ƒè™‘ä¸€ä¸‹ï¼š

```
æŒ‰é’®çš„å¤šç§çŠ¶æ€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Normalï¼ˆæ­£å¸¸ï¼‰    â”‚
â”‚    é¼ æ ‡ä¸åœ¨ä¸Šé¢      â”‚
â”‚    æ˜¾ç¤ºé»˜è®¤å›¾ç‰‡      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. Hoverï¼ˆæ‚¬åœï¼‰     â”‚
â”‚    é¼ æ ‡ç§»ä¸Šæ¥        â”‚
â”‚    å›¾ç‰‡é«˜äº®          â”‚
â”‚    æ’­æ”¾æç¤ºéŸ³        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. Pressedï¼ˆæŒ‰ä¸‹ï¼‰   â”‚
â”‚    æŒ‰ä¸‹é¼ æ ‡å·¦é”®      â”‚
â”‚    å›¾ç‰‡å‹ä¸‹æ•ˆæœ      â”‚
â”‚    æ’­æ”¾ç‚¹å‡»éŸ³        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. Clickedï¼ˆç‚¹å‡»ï¼‰   â”‚
â”‚    æ¾å¼€é¼ æ ‡          â”‚
â”‚    æ‰§è¡ŒæŒ‰é’®åŠŸèƒ½      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŒ‰é’®çŠ¶æ€è¯¦è§£

<img src="https://theorhythm.top/gamedev/SL/SL.096.webp" alt="æŒ‰é’®çŠ¶æ€" style="display: block; margin: auto; width: 700px;" />

| çŠ¶æ€ | è§¦å‘æ¡ä»¶ | è§†è§‰æ•ˆæœ | éŸ³æ•ˆ |
|------|---------|---------|------|
| **Normal** | é¼ æ ‡ä¸åœ¨æŒ‰é’®ä¸Š | é»˜è®¤å¤–è§‚ | æ—  |
| **Hover** | é¼ æ ‡ç§»å…¥ | é«˜äº®/å‘å…‰ | æ‚¬åœéŸ³ |
| **Pressed** | é¼ æ ‡æŒ‰ä¸‹ | å‹ä¸‹æ•ˆæœ | ç‚¹å‡»éŸ³ |
| **Clicked** | é¼ æ ‡æ¾å¼€ï¼ˆåœ¨æŒ‰é’®å†…ï¼‰ | å›åˆ°Hover | æ‰§è¡Œå›è°ƒ |

### ä¼ ç»Ÿæ–¹å¼ vs çŠ¶æ€æ¨¡å¼

```
ä¼ ç»Ÿif-elseæ–¹å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleInput() {      â”‚
â”‚   if (é¼ æ ‡ç§»å…¥) {    â”‚
â”‚     if (å½“å‰=Normal) {â”‚
â”‚       æ’­æ”¾éŸ³æ•ˆ        â”‚
â”‚       åˆ‡æ¢å›¾ç‰‡        â”‚
â”‚       çŠ¶æ€=Hover     â”‚
â”‚     }                â”‚
â”‚   }                  â”‚
â”‚   if (é¼ æ ‡æŒ‰ä¸‹) {    â”‚
â”‚     if (å½“å‰=Hover) { â”‚
â”‚       æ’­æ”¾éŸ³æ•ˆ        â”‚
â”‚       åˆ‡æ¢å›¾ç‰‡        â”‚
â”‚       çŠ¶æ€=Pressed   â”‚
â”‚     }                â”‚
â”‚   }                  â”‚
â”‚   // 50è¡Œif-else...  â”‚
â”‚ }                    â”‚
â”‚ âŒ æ··ä¹±éš¾ç»´æŠ¤        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

çŠ¶æ€æ¨¡å¼æ–¹å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleInput() {      â”‚
â”‚   state->handle(this)â”‚
â”‚ }                    â”‚
â”‚                      â”‚
â”‚ NormalState::handle(){â”‚
â”‚   if (é¼ æ ‡ç§»å…¥)      â”‚
â”‚     return HoverStateâ”‚
â”‚ }                    â”‚
â”‚                      â”‚
â”‚ HoverState::handle() {â”‚
â”‚   if (é¼ æ ‡æŒ‰ä¸‹)      â”‚
â”‚     return PressedStateâ”‚
â”‚ }                    â”‚
â”‚ âœ… æ¸…æ™°æ˜“æ‰©å±•        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

å¦‚æœç”¨ä¸€å † `if-else` æ¥ç®¡ç†è¿™äº›çŠ¶æ€å’Œè½¬æ¢ï¼Œä»£ç ä¼šè¿…é€Ÿå˜å¾—æ··ä¹±ä¸”éš¾ä»¥ç»´æŠ¤ã€‚è€Œ**çŠ¶æ€æ¨¡å¼**æ­£æ˜¯è§£å†³è¿™ç±»é—®é¢˜çš„å®Œç¾æ–¹æ¡ˆã€‚

### çŠ¶æ€æ¨¡å¼çš„ä¼˜åŠ¿

```
çŠ¶æ€æ¨¡å¼æ ¸å¿ƒæ€æƒ³ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¹è±¡çš„è¡Œä¸ºå–å†³äºçŠ¶æ€ â”‚
â”‚ çŠ¶æ€æ”¹å˜ â†’ è¡Œä¸ºæ”¹å˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å®ç°æ–¹å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UIButton             â”‚
â”‚   state_  â”€â”€â”€â”       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ æŒ‡å‘
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚
        â†“             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Normal   â”‚ â†â†’ â”‚  Hover   â”‚
â”‚ State    â”‚    â”‚  State   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Pressed  â”‚
                â”‚  State   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ¯ä¸ªçŠ¶æ€ç‹¬ç«‹å¤„ç†é€»è¾‘ï¼
```

| ä¼˜åŠ¿ | è¯´æ˜ | æ•ˆæœ |
|------|------|------|
| **èŒè´£åˆ†ç¦»** | æ¯ä¸ªçŠ¶æ€ç‹¬ç«‹ç±» | ä»£ç æ¸…æ™° âœ… |
| **æ˜“äºæ‰©å±•** | æ·»åŠ æ–°çŠ¶æ€ç®€å• | å¯æ‰©å±• âœ… |
| **æ˜“äºç»´æŠ¤** | ä¿®æ”¹ä¸å½±å“å…¶ä»–çŠ¶æ€ | ä½è€¦åˆ âœ… |
| **ç¬¦åˆå¼€é—­åŸåˆ™** | å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ | è®¾è®¡ä¼˜é›… âœ… |

å®ƒå…è®¸ä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ‘ä»¬çš„UIå…ƒç´ ï¼‰åœ¨å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å…¶è¡Œä¸ºï¼Œ**è¿™ä¸ªå¯¹è±¡çœ‹èµ·æ¥å°±åƒæ˜¯æ”¹å˜äº†å®ƒçš„ç±»**ã€‚

æˆ‘ä»¬å°†ä¸ºUIå…ƒç´ åˆ›å»ºä¸€ä¸ªçŠ¶æ€æœºï¼Œå…¶ä¸­**æ¯ä¸ªçŠ¶æ€éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡**ï¼Œè´Ÿè´£å¤„ç†åœ¨è¯¥çŠ¶æ€ä¸‹çš„è¾“å…¥å’Œé€»è¾‘ã€‚

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šUIInteractive åŸºç±»

### ğŸ’¡ æŠ½è±¡äº¤äº’ï¼šå¯äº¤äº’UIå…ƒç´ 

å¹¶éæ‰€æœ‰UIå…ƒç´ éƒ½æ˜¯å¯äº¤äº’çš„ï¼ˆæ¯”å¦‚ `UILabel`ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„åŸºç±» **UIInteractive**ï¼Œå®ƒç»§æ‰¿è‡ª `UIElement`ï¼Œå¹¶æ·»åŠ äº¤äº’æ‰€éœ€çš„åŠŸèƒ½ã€‚

```
UIå…ƒç´ åˆ†ç±»ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UIElement      â”‚ â† æ‰€æœ‰UIåŸºç±»
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
    â†“         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é™æ€UI â”‚â”‚ äº¤äº’UI   â”‚
â”‚        â”‚â”‚Interactiveâ”‚
â”‚â€¢ Panel â”‚â”‚          â”‚
â”‚â€¢ Image â”‚â”‚â€¢ Button  â”‚
â”‚â€¢ Label â”‚â”‚â€¢ Slider  â”‚
â”‚        â”‚â”‚â€¢ Checkboxâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  åªæ˜¾ç¤º    å¯äº¤äº’
```

<img src="https://theorhythm.top/gamedev/SL/SL.097.webp" alt="å¯äº¤äº’UIç±»å›¾" style="display: block; margin: auto; width: 700px;" />

---

## 1. UIInteractive è®¾è®¡

### src/engine/ui/ui_interactive.hï¼ˆæ–°å»ºæ–‡ä»¶ï¼‰

```cpp
#pragma once
#include "ui_element.h"
#include "state/ui_state.h" // çŠ¶æ€æœºåŸºç±»
#include "../render/sprite.h"
#include <memory>
#include <string>
#include <unordered_map>

namespace engine::ui {

class UIInteractive : public UIElement {
protected:
    engine::core::Context& context_;
    std::unique_ptr<engine::ui::state::UIState> state_; // å½“å‰çŠ¶æ€
    // ç”¨äºå­˜å‚¨ä¸åŒçŠ¶æ€ä¸‹çš„ç²¾çµ
    std::unordered_map<std::string, std::unique_ptr<engine::render::Sprite>> sprites_;
    // ç”¨äºå­˜å‚¨ä¸åŒäº‹ä»¶çš„éŸ³æ•ˆ
    std::unordered_map<std::string, std::string> sounds_;
    engine::render::Sprite* current_sprite_ = nullptr; // å½“å‰æ˜¾ç¤ºçš„ç²¾çµ
    bool interactive_ = true;

public:
    UIInteractive(engine::core::Context& context, /*...*/);
    virtual void clicked() {} // ç‚¹å‡»äº‹ä»¶çš„è™šå‡½æ•°

    void setState(std::unique_ptr<engine::ui::state::UIState> state);
    void setSprite(const std::string& name);
    void playSound(const std::string& name);

    bool handleInput(engine::core::Context& context) override;
    void render(engine::core::Context& context) override;
};
}
```

### ğŸ’¡ æ ¸å¿ƒè®¾è®¡è¦ç‚¹

```
UIInteractive æ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UIInteractive           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ state_             â”‚  â”‚ â† å½“å‰çŠ¶æ€å¯¹è±¡
â”‚  â”‚ â€¢ NormalState      â”‚  â”‚   è´Ÿè´£è¾“å…¥å¤„ç†
â”‚  â”‚ â€¢ HoverState       â”‚  â”‚
â”‚  â”‚ â€¢ PressedState     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ sprites_           â”‚  â”‚ â† çŠ¶æ€â†’ç²¾çµæ˜ å°„
â”‚  â”‚ ["normal"]  â†’ ğŸ”µ   â”‚  â”‚
â”‚  â”‚ ["hover"]   â†’ ğŸŸ¢   â”‚  â”‚
â”‚  â”‚ ["pressed"] â†’ ğŸŸ¡   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ sounds_            â”‚  â”‚ â† äº‹ä»¶â†’éŸ³æ•ˆæ˜ å°„
â”‚  â”‚ ["hover"]   â†’ ğŸ”Š1  â”‚  â”‚
â”‚  â”‚ ["pressed"] â†’ ğŸ”Š2  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ clicked()          â”‚  â”‚ â† ç‚¹å‡»å›è°ƒ
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®æˆå‘˜è¯´æ˜

| æˆå‘˜ | ç±»å‹ | ä½œç”¨ |
|-----|------|------|
| **state_** | `unique_ptr<UIState>` | å½“å‰çŠ¶æ€å¯¹è±¡ |
| **sprites_** | `unordered_map` | çŠ¶æ€åâ†’ç²¾çµæ˜ å°„ |
| **sounds_** | `unordered_map` | äº‹ä»¶åâ†’éŸ³æ•ˆè·¯å¾„ |
| **current_sprite_** | `Sprite*` | å½“å‰æ˜¾ç¤ºçš„ç²¾çµ |
| **interactive_** | `bool` | æ˜¯å¦å¯äº¤äº’ |

### æ ¸å¿ƒæ–¹æ³•

**1. state_: çŠ¶æ€å¯¹è±¡**

```cpp
std::unique_ptr<engine::ui::state::UIState> state_;
```

ä¸€ä¸ªæŒ‡å‘å½“å‰çŠ¶æ€å¯¹è±¡çš„æ™ºèƒ½æŒ‡é’ˆã€‚**æ‰€æœ‰çš„è¾“å…¥å¤„ç†éƒ½å°†å§”æ‰˜ç»™è¿™ä¸ªçŠ¶æ€å¯¹è±¡**ã€‚

**2. sprites_ å’Œ sounds_: èµ„æºæ˜ å°„**

```cpp
std::unordered_map<std::string, std::unique_ptr<engine::render::Sprite>> sprites_;
std::unordered_map<std::string, std::string> sounds_;
```

ç”¨ `std::unordered_map` æ¥å­˜å‚¨ä¸åŒçŠ¶æ€ï¼ˆ"normal", "hover", "pressed"ï¼‰å¯¹åº”çš„ç²¾çµå’ŒéŸ³æ•ˆã€‚è¿™ä½¿å¾— UIInteractive çš„å­ç±»å¯ä»¥éå¸¸çµæ´»åœ°è¿›è¡Œé…ç½®ã€‚

```
èµ„æºé…ç½®ç¤ºä¾‹ï¼š
sprites_["normal"]  = Sprite("button_normal.png")
sprites_["hover"]   = Sprite("button_hover.png")
sprites_["pressed"] = Sprite("button_pressed.png")

sounds_["hover"]    = "hover.wav"
sounds_["pressed"]  = "click.wav"
```

**3. clicked(): ç‚¹å‡»å›è°ƒ**

```cpp
virtual void clicked() {}
```

ä¸€ä¸ªè™šå‡½æ•°ï¼Œå½“"ç‚¹å‡»"äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œç”±çŠ¶æ€å¯¹è±¡è°ƒç”¨ã€‚å­ç±»å¯ä»¥é‡å†™å®ƒæ¥å®ç°å…·ä½“çš„ç‚¹å‡»é€»è¾‘ã€‚

### å·¥ä½œæµç¨‹

```
UIInteractive å·¥ä½œæµç¨‹ï¼š
    â†“
1. handleInput() è¢«è°ƒç”¨
    â†“
2. å§”æ‰˜ç»™å½“å‰çŠ¶æ€
   state_->handleInput(this)
    â†“
3. çŠ¶æ€å¤„ç†è¾“å…¥
   â€¢ æ£€æŸ¥é¼ æ ‡ä½ç½®
   â€¢ æ£€æŸ¥é¼ æ ‡æŒ‰é”®
    â†“
4. çŠ¶æ€å†³å®šæ˜¯å¦åˆ‡æ¢
   return new_state or nullptr
    â†“
5. å¦‚æœè¿”å›æ–°çŠ¶æ€
   setState(new_state)
   â€¢ è°ƒç”¨æ—§çŠ¶æ€exit()
   â€¢ è°ƒç”¨æ–°çŠ¶æ€enter()
    â†“
6. æ–°çŠ¶æ€ç”Ÿæ•ˆ
   ä¸‹æ¬¡è¾“å…¥ç”±æ–°çŠ¶æ€å¤„ç†
```

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šçŠ¶æ€æœºå®ç°

### ğŸ’¡ UIçŠ¶æ€ç³»ç»Ÿ

æˆ‘ä»¬ä¸ºUIçŠ¶æ€å®šä¹‰ä¸€ä¸ªåŸºç±» `UIState`ï¼Œå’Œä¸‰ä¸ªå…·ä½“çš„çŠ¶æ€ç±»ã€‚

---

## 2. UIState åŸºç±»

### src/engine/ui/state/ui_state.hï¼ˆæ–°å»ºæ–‡ä»¶ï¼‰

```cpp
namespace engine::ui::state {
class UIState {
protected:
    engine::ui::UIInteractive* owner_ = nullptr;
public:
    UIState(engine::ui::UIInteractive* owner) : owner_(owner) {}
    virtual ~UIState() = default;
protected:
    virtual void enter() {} // è¿›å…¥è¯¥çŠ¶æ€æ—¶è°ƒç”¨
    // å¤„ç†è¾“å…¥ï¼Œå¹¶å¯èƒ½è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€æ¥æ›¿æ¢è‡ªå·±
    virtual std::unique_ptr<UIState> handleInput(engine::core::Context& context) = 0;
};
}
```

### ğŸ’¡ å…³é”®è®¾è®¡

```
UIState æ¥å£ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UIState              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ owner_         â”‚  â”‚ â† æŒ‡å‘æ‰€å±UIå…ƒç´ 
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ enter()        â”‚  â”‚ â† è¿›å…¥çŠ¶æ€æ—¶è°ƒç”¨
â”‚  â”‚ â€¢ è®¾ç½®ç²¾çµ     â”‚  â”‚   åˆå§‹åŒ–
â”‚  â”‚ â€¢ æ’­æ”¾éŸ³æ•ˆ     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ handleInput()  â”‚  â”‚ â† å¤„ç†è¾“å…¥
â”‚  â”‚ â€¢ æ£€æµ‹é¼ æ ‡     â”‚  â”‚   çŠ¶æ€è½¬æ¢
â”‚  â”‚ â€¢ è¿”å›æ–°çŠ¶æ€   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

`UIState::handleInput` çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª `std::unique_ptr<UIState>`ã€‚å¦‚æœå®ƒè¿”å›ä¸€ä¸ªéç©ºçš„æŒ‡é’ˆï¼ŒUIInteractive å°±ä¼šç”¨è¿™ä¸ªæ–°çš„çŠ¶æ€æ¥æ›¿æ¢å½“å‰çŠ¶æ€ï¼Œä»è€Œ**å®ŒæˆçŠ¶æ€è½¬æ¢**ã€‚

### çŠ¶æ€è½¬æ¢æœºåˆ¶

```
çŠ¶æ€è½¬æ¢æµç¨‹ï¼š
    â†“
1. å½“å‰çŠ¶æ€å¤„ç†è¾“å…¥
   current_state->handleInput()
    â†“
2. çŠ¶æ€è¿”å›ç»“æœ
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ nullptr  â”‚ new_stateâ”‚
   â†“          â†“
3. ä¿æŒå½“å‰   åˆ‡æ¢çŠ¶æ€
   ä¸å˜       â”œâ”€ exitæ—§çŠ¶æ€
              â””â”€ enteræ–°çŠ¶æ€
    â†“
4. ä¸‹æ¬¡è¾“å…¥ä½¿ç”¨æ–°çŠ¶æ€
```

---

## 3. ä¸‰ä¸ªå…·ä½“çŠ¶æ€

### çŠ¶æ€è½¬æ¢å›¾

```
çŠ¶æ€è½¬æ¢å›¾ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NormalState  â”‚ â† åˆå§‹çŠ¶æ€
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ é¼ æ ‡ç§»å…¥
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HoverState   â”‚
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
   â”‚       â”‚ é¼ æ ‡ç§»å‡º
   â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ é¼ æ ‡æŒ‰ä¸‹         â”‚
   â†“                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚PressedState  â”‚  â”‚ NormalState  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ é¼ æ ‡æ¾å¼€
       â”œâ”€ åœ¨å†…éƒ¨ â†’ clicked() + HoverState
       â””â”€ åœ¨å¤–éƒ¨ â†’ NormalState
```

### UINormalStateï¼ˆæ­£å¸¸çŠ¶æ€ï¼‰

```
UINormalState èŒè´£ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ enter()              â”‚
â”‚ â€¢ setSprite("normal")â”‚ â† æ˜¾ç¤ºæ­£å¸¸å¤–è§‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleInput()        â”‚
â”‚ â€¢ æ£€æµ‹é¼ æ ‡æ˜¯å¦è¿›å…¥   â”‚
â”‚ â€¢ å¦‚æœè¿›å…¥ï¼š         â”‚
â”‚   - playSound("hover")â”‚
â”‚   - return HoverStateâ”‚
â”‚ â€¢ å¦åˆ™ï¼š             â”‚
â”‚   - return nullptr   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**enter()**: è®¾ç½®ç²¾çµä¸º "normal"ã€‚

**handleInput()**: æ£€æŸ¥é¼ æ ‡æ˜¯å¦è¿›å…¥å…ƒç´ è¾¹ç•Œã€‚å¦‚æœæ˜¯ï¼Œæ’­æ”¾ "hover" éŸ³æ•ˆï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ `UIHoverState` å®ä¾‹ã€‚

### UIHoverStateï¼ˆæ‚¬åœçŠ¶æ€ï¼‰

```
UIHoverState èŒè´£ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ enter()              â”‚
â”‚ â€¢ setSprite("hover") â”‚ â† æ˜¾ç¤ºæ‚¬åœå¤–è§‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleInput()        â”‚
â”‚ â€¢ æ£€æµ‹é¼ æ ‡ä½ç½®       â”‚
â”‚ â€¢ å¦‚æœç¦»å¼€ï¼š         â”‚
â”‚   - return Normal    â”‚
â”‚ â€¢ å¦‚æœæŒ‰ä¸‹ï¼š         â”‚
â”‚   - return Pressed   â”‚
â”‚ â€¢ å¦åˆ™ï¼š             â”‚
â”‚   - return nullptr   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**enter()**: è®¾ç½®ç²¾çµä¸º "hover"ã€‚

**handleInput()**: æ£€æŸ¥é¼ æ ‡æ˜¯å¦ç¦»å¼€å…ƒç´ è¾¹ç•Œï¼ˆè¿”å› `UINormalState`ï¼‰ï¼Œæˆ–è€…é¼ æ ‡æ˜¯å¦è¢«æŒ‰ä¸‹ï¼ˆè¿”å› `UIPressedState`ï¼‰ã€‚

### UIPressedStateï¼ˆæŒ‰ä¸‹çŠ¶æ€ï¼‰

```
UIPressedState èŒè´£ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ enter()              â”‚
â”‚ â€¢ setSprite("pressed")â”‚ â† æ˜¾ç¤ºæŒ‰ä¸‹å¤–è§‚
â”‚ â€¢ playSound("pressed")â”‚ â† æ’­æ”¾ç‚¹å‡»éŸ³
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleInput()        â”‚
â”‚ â€¢ æ£€æµ‹é¼ æ ‡æ¾å¼€       â”‚
â”‚ â€¢ å¦‚æœæ¾å¼€åœ¨å†…éƒ¨ï¼š   â”‚
â”‚   - owner->clicked() â”‚ â† è§¦å‘ç‚¹å‡»ï¼
â”‚   - return Hover     â”‚
â”‚ â€¢ å¦‚æœæ¾å¼€åœ¨å¤–éƒ¨ï¼š   â”‚
â”‚   - return Normal    â”‚
â”‚ â€¢ å¦åˆ™ï¼š             â”‚
â”‚   - return nullptr   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**enter()**: è®¾ç½®ç²¾çµä¸º "pressed"ï¼Œæ’­æ”¾ "pressed" éŸ³æ•ˆã€‚

**handleInput()**: æ£€æŸ¥é¼ æ ‡æ˜¯å¦è¢«æ¾å¼€ã€‚
- å¦‚æœåœ¨å…ƒç´ è¾¹ç•Œå†…æ¾å¼€ï¼Œå°±è°ƒç”¨ `owner_->clicked()` è§¦å‘ç‚¹å‡»äº‹ä»¶ï¼Œå¹¶è¿”å› `UIHoverState`ã€‚
- å¦‚æœåœ¨å…ƒç´ è¾¹ç•Œå¤–æ¾å¼€ï¼Œä¸è§¦å‘äº‹ä»¶ï¼Œç›´æ¥è¿”å› `UINormalState`ã€‚

### src/engine/ui/state/ui_pressed_state.cppï¼ˆç¤ºä¾‹å®ç°ï¼‰

```cpp
std::unique_ptr<UIState> UIPressedState::handleInput(engine::core::Context& context)
{
    auto& input_manager = context.getInputManager();
    auto mouse_pos = input_manager.getLogicalMousePosition();
    if (input_manager.isActionReleased("MouseLeftClick")) {
        if (!owner_->isPointInside(mouse_pos)) { // æ¾å¼€æ—¶åœ¨å¤–éƒ¨
            return std::make_unique<engine::ui::state::UINormalState>(owner_);
        } else { // æ¾å¼€æ—¶åœ¨å†…éƒ¨ï¼Œè§¦å‘ç‚¹å‡»ï¼
            owner_->clicked();
            return std::make_unique<engine::ui::state::UIHoverState>(owner_);
        }
    }
    return nullptr; // ä¿æŒå½“å‰çŠ¶æ€
}
```

è¿™å¥—çŠ¶æ€æœºæ¸…æ™°åœ°å®šä¹‰äº†æŒ‰é’®çš„æ‰€æœ‰äº¤äº’è¡Œä¸ºã€‚

### çŠ¶æ€å¯¹æ¯”è¡¨

| çŠ¶æ€ | æ˜¾ç¤ºç²¾çµ | è¿›å…¥æ—¶éŸ³æ•ˆ | é¼ æ ‡ç§»å…¥ | é¼ æ ‡ç§»å‡º | é¼ æ ‡æŒ‰ä¸‹ | é¼ æ ‡æ¾å¼€ |
|-----|---------|-----------|---------|---------|---------|---------|
| **Normal** | normal | - | â†’Hover | - | - | - |
| **Hover** | hover | hoveréŸ³ | - | â†’Normal | â†’Pressed | - |
| **Pressed** | pressed | pressedéŸ³ | - | - | - | â†’Hover(å†…)/Normal(å¤–) |

### å®Œæ•´çš„äº¤äº’æµç¨‹

```
å®Œæ•´çš„æŒ‰é’®ç‚¹å‡»æµç¨‹ï¼š
    â†“
1. åˆå§‹çŠ¶æ€ï¼šNormal
   [æŒ‰é’®]  æ˜¾ç¤ºæ­£å¸¸å¤–è§‚
    â†“
2. é¼ æ ‡ç§»å…¥
   Normal â†’ Hover
   æ’­æ”¾hoveréŸ³æ•ˆ
   [æŒ‰é’®]  æ˜¾ç¤ºé«˜äº®å¤–è§‚
    â†“
3. é¼ æ ‡æŒ‰ä¸‹
   Hover â†’ Pressed
   æ’­æ”¾clickéŸ³æ•ˆ
   [æŒ‰é’®]  æ˜¾ç¤ºæŒ‰ä¸‹å¤–è§‚
    â†“
4. é¼ æ ‡æ¾å¼€ï¼ˆåœ¨æŒ‰é’®å†…ï¼‰
   Pressed â†’ Hover
   æ‰§è¡Œclicked()å›è°ƒ âœ…
   [æŒ‰é’®]  æ˜¾ç¤ºé«˜äº®å¤–è§‚
    â†“
5. é¼ æ ‡ç§»å‡º
   Hover â†’ Normal
   [æŒ‰é’®]  æ˜¾ç¤ºæ­£å¸¸å¤–è§‚

å–æ¶ˆç‚¹å‡»ï¼ˆæ¾å¼€åœ¨å¤–éƒ¨ï¼‰ï¼š
Pressed â†’ Normalï¼ˆä¸æ‰§è¡Œå›è°ƒï¼‰
```

---

## ç¬¬å››éƒ¨åˆ†ï¼šUIButton å®ç°

### ğŸ’¡ æœ€ç»ˆæˆå“ï¼šåŠŸèƒ½å®Œæ•´çš„æŒ‰é’®

æœ‰äº†å¼ºå¤§çš„ `UIInteractive` åŸºç±»å’ŒçŠ¶æ€æœºï¼ŒUIButton çš„å®ç°å°±å˜å¾—éå¸¸ç®€å•äº†ã€‚å®ƒåªéœ€è¦åœ¨æ„é€ æ—¶é…ç½®å¥½ä¸åŒçŠ¶æ€çš„ç²¾çµï¼Œå¹¶æä¾›ä¸€ä¸ªæ‰§è¡Œç‚¹å‡»é€»è¾‘çš„å›è°ƒå‡½æ•°ã€‚

---

## 4. UIButton è®¾è®¡

### src/engine/ui/ui_button.hï¼ˆæ–°å»ºæ–‡ä»¶ï¼‰

```cpp
#pragma once
#include "ui_interactive.h"
#include <functional> // For std::function

namespace engine::ui {
class UIButton final: public UIInteractive {
private:
    std::function<void()> callback_; // å¯è‡ªå®šä¹‰çš„å›è°ƒå‡½æ•°

public:
    UIButton(engine::core::Context& context,
             const std::string& normal_sprite_id,
             const std::string& hover_sprite_id,
             const std::string& pressed_sprite_id,
             /* ... position, size ... */
             std::function<void()> callback = nullptr);

    void clicked() override; // é‡å†™åŸºç±»æ–¹æ³•
};
}
```

### ğŸ’¡ std::function çš„å¨åŠ›

```cpp
std::function<void()> callback_;
```

`callback_` æ˜¯ä¸€ä¸ª `std::function<void()>` å¯¹è±¡ï¼Œå®ƒå¯ä»¥å­˜å‚¨ä»»ä½•"æ— å‚æ•°ï¼Œæ— è¿”å›å€¼"çš„å¯è°ƒç”¨å¯¹è±¡ï¼ŒåŒ…æ‹¬ï¼š

```
std::function å¯å­˜å‚¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æ™®é€šå‡½æ•°          â”‚
â”‚    void func() {}    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. é™æ€å‡½æ•°          â”‚
â”‚    static void f() {}â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. Lambdaè¡¨è¾¾å¼ âœ¨   â”‚
â”‚    []() { ... }      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. æˆå‘˜å‡½æ•°ç»‘å®š      â”‚
â”‚    bind(&Class::f)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 5. å‡½æ•°å¯¹è±¡          â”‚
â”‚    struct F {        â”‚
â”‚      void operator() â”‚
â”‚    };                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

è¿™ä½¿å¾—æŒ‰é’®çš„ç‚¹å‡»è¡Œä¸ºå¯ä»¥ç”±**åˆ›å»ºå®ƒçš„åœ°æ–¹å®Œå…¨è‡ªå®šä¹‰**ã€‚

### std::function ä¼˜åŠ¿

| ç‰¹æ€§ | è¯´æ˜ | ä¼˜åŠ¿ |
|------|------|------|
| **ç±»å‹æ“¦é™¤** | å¯å­˜å‚¨ä»»ä½•å¯è°ƒç”¨å¯¹è±¡ | çµæ´» âœ… |
| **ç±»å‹å®‰å…¨** | ç¼–è¯‘æœŸæ£€æŸ¥ | å®‰å…¨ âœ… |
| **æ˜“äºä½¿ç”¨** | æ”¯æŒLambda | ç®€æ´ âœ… |
| **å¯å¤åˆ¶** | å¯å­˜å‚¨å’Œä¼ é€’ | æ–¹ä¾¿ âœ… |

### src/engine/ui/ui_button.cppï¼ˆå®ç°ï¼‰

```cpp
UIButton::UIButton(/*...sprites...*/, std::function<void()> callback)
    : UIInteractive(context, position, size), callback_(std::move(callback)) {
    // 1. æ·»åŠ ä¸åŒçŠ¶æ€çš„ç²¾çµ
    addSprite("normal", std::make_unique<engine::render::Sprite>(normal_sprite_id));
    addSprite("hover", std::make_unique<engine::render::Sprite>(hover_sprite_id));
    addSprite("pressed", std::make_unique<engine::render::Sprite>(pressed_sprite_id));

    // 2. è®¾ç½®åˆå§‹çŠ¶æ€
    setState(std::make_unique<engine::ui::state::UINormalState>(this));

    // 3. é…ç½®é»˜è®¤éŸ³æ•ˆ
    addSound("hover", "assets/audio/button_hover.wav");
    addSound("pressed", "assets/audio/button_click.wav");
}

void UIButton::clicked() {
    if (callback_) callback_(); // å¦‚æœå›è°ƒå‡½æ•°æœ‰æ•ˆï¼Œåˆ™æ‰§è¡Œå®ƒ
}
```

### æ„é€ æµç¨‹

```
UIButton æ„é€ æµç¨‹ï¼š
    â†“
1. æ·»åŠ ç²¾çµ
   sprites_["normal"]  = Sprite(...)
   sprites_["hover"]   = Sprite(...)
   sprites_["pressed"] = Sprite(...)
    â†“
2. è®¾ç½®åˆå§‹çŠ¶æ€
   setState(NormalState)
    â†“
3. é…ç½®éŸ³æ•ˆ
   sounds_["hover"]   = "hover.wav"
   sounds_["pressed"] = "click.wav"
    â†“
4. ä¿å­˜å›è°ƒ
   callback_ = callback
    â†“
å®Œæˆï¼æŒ‰é’®å¯ç”¨
```

### UIButton æ¶æ„

```
UIButton å®Œæ•´æ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       UIButton           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ callback_          â”‚  â”‚ â† ç‚¹å‡»å›è°ƒ
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         ç»§æ‰¿ â†“           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ UIInteractive      â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â”‚ state_         â”‚ â”‚  â”‚ â† çŠ¶æ€æœº
â”‚  â”‚ â”‚ â€¢ Normal       â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ â€¢ Hover        â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ â€¢ Pressed      â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â”‚ sprites_       â”‚ â”‚  â”‚ â† å¤šçŠ¶æ€ç²¾çµ
â”‚  â”‚ â”‚ ["normal"]  ğŸ”µ â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ ["hover"]   ğŸŸ¢ â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ ["pressed"] ğŸŸ¡ â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â”‚ sounds_        â”‚ â”‚  â”‚ â† éŸ³æ•ˆ
â”‚  â”‚ â”‚ ["hover"]   ğŸ”Š â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ ["pressed"] ğŸ”Š â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å®Œæ•´çš„äº¤äº’å¼æŒ‰é’®ï¼
```

---

## ç¬¬äº”éƒ¨åˆ†ï¼šæµ‹è¯•éªŒè¯

### ğŸ’¡ åœ¨åœºæ™¯ä¸­æµ‹è¯•æŒ‰é’®

ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨ GameScene ä¸­åˆ›å»ºä¸€ä¸ªæµ‹è¯•æŒ‰é’®ï¼Œçœ‹çœ‹æ•ˆæœã€‚

---

## 5. åœ¨ GameScene ä¸­æµ‹è¯•

### src/game/scene/game_scene.cppï¼ˆå®ç°ï¼‰

```cpp
void GameScene::createTestButton() {
    auto test_button = std::make_unique<engine::ui::UIButton>(
        context_,
        "assets/textures/UI/buttons/Start1.png",  // normal
        "assets/textures/UI/buttons/Start2.png",  // hover
        "assets/textures/UI/buttons/Start3.png",  // pressed
        glm::vec2(100.0f, 100.0f),
        glm::vec2(0.0f), // é‡‡ç”¨å›¾ç‰‡å¤§å°
        // ä½¿ç”¨Lambdaè¡¨è¾¾å¼å®šä¹‰ç‚¹å‡»åçš„è¡Œä¸º
        [this](){ this->testButtonClicked(); }
    );
    ui_manager_->addElement(std::move(test_button));
}

void GameScene::testButtonClicked() {
    spdlog::info("æµ‹è¯•æŒ‰é’®è¢«ç‚¹å‡»");
}
```

### Lambda è¡¨è¾¾å¼è¯´æ˜

```cpp
[this](){ this->testButtonClicked(); }
```

```
Lambda è¡¨è¾¾å¼ç»“æ„ï¼š
[æ•è·åˆ—è¡¨](å‚æ•°åˆ—è¡¨){ å‡½æ•°ä½“ }

ç¤ºä¾‹åˆ†æï¼š
[this]  â† æ•è·thisæŒ‡é’ˆï¼Œå¯è®¿é—®æˆå‘˜
()      â† æ— å‚æ•°
{ this->testButtonClicked(); }  â† è°ƒç”¨æˆå‘˜å‡½æ•°

ç­‰ä»·äºï¼š
void callback() {
    this->testButtonClicked();
}
```

### Lambda æ•è·æ–¹å¼

| æ•è·æ–¹å¼ | è¯­æ³• | è¯´æ˜ | ç”¨é€” |
|---------|-----|------|------|
| **å€¼æ•è·** | `[x]` | å¤åˆ¶å˜é‡ | å±€éƒ¨å˜é‡ |
| **å¼•ç”¨æ•è·** | `[&x]` | å¼•ç”¨å˜é‡ | éœ€è¦ä¿®æ”¹ |
| **thisæ•è·** | `[this]` | æ•è·thisæŒ‡é’ˆ | è®¿é—®æˆå‘˜ âœ… |
| **å…¨éƒ¨å€¼æ•è·** | `[=]` | å¤åˆ¶æ‰€æœ‰ | ç®€ä¾¿æ–¹å¼ |
| **å…¨éƒ¨å¼•ç”¨æ•è·** | `[&]` | å¼•ç”¨æ‰€æœ‰ | éœ€è¦ä¿®æ”¹ |

### æµ‹è¯•æ•ˆæœ

```
æµ‹è¯•æŒ‰é’®äº¤äº’æ•ˆæœï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         â”‚
â”‚   [å¼€å§‹æ¸¸æˆ]  â† æ­£å¸¸    â”‚
â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é¼ æ ‡ç§»å…¥ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   [å¼€å§‹æ¸¸æˆ]  â† é«˜äº®âœ¨  â”‚
â”‚   ğŸ”Š æ’­æ”¾æ‚¬åœéŸ³æ•ˆ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é¼ æ ‡æŒ‰ä¸‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   [å¼€å§‹æ¸¸æˆ]  â† æŒ‰ä¸‹ğŸ’¥  â”‚
â”‚   ğŸ”Š æ’­æ”¾ç‚¹å‡»éŸ³æ•ˆ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é¼ æ ‡æ¾å¼€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   [å¼€å§‹æ¸¸æˆ]  â† é«˜äº®    â”‚
â”‚   âœ… æ‰§è¡Œå›è°ƒå‡½æ•°       â”‚
â”‚   ğŸ“ æ§åˆ¶å°è¾“å‡ºæ—¥å¿—     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

è¿è¡Œæ¸¸æˆï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªå¼€å§‹æŒ‰é’®ã€‚å°†é¼ æ ‡ç§»åŠ¨åˆ°å®ƒä¸Šé¢ï¼Œå®ƒä¼šé«˜äº®å¹¶æ’­æ”¾éŸ³æ•ˆã€‚ç‚¹å‡»å®ƒï¼Œå®ƒä¼šæ”¹å˜å½¢æ€å¹¶æ’­æ”¾éŸ³æ•ˆï¼ŒåŒæ—¶æ§åˆ¶å°ä¼šæ‰“å°å‡º "æµ‹è¯•æŒ‰é’®è¢«ç‚¹å‡»"ã€‚ä¸€ä¸ªå®Œæ•´çš„äº¤äº’æµç¨‹å°±æ­¤å®Œæˆï¼

### åŠŸèƒ½æ£€æŸ¥æ¸…å•

```
æŒ‰é’®åŠŸèƒ½æµ‹è¯•ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… æ­£å¸¸çŠ¶æ€æ˜¾ç¤º      â”‚
â”‚ âœ… é¼ æ ‡æ‚¬åœé«˜äº®      â”‚
â”‚ âœ… æ‚¬åœéŸ³æ•ˆæ’­æ”¾      â”‚
â”‚ âœ… æŒ‰ä¸‹çŠ¶æ€æ˜¾ç¤º      â”‚
â”‚ âœ… ç‚¹å‡»éŸ³æ•ˆæ’­æ”¾      â”‚
â”‚ âœ… å›è°ƒå‡½æ•°æ‰§è¡Œ      â”‚
â”‚ âœ… å–æ¶ˆç‚¹å‡»æ­£å¸¸      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… è¿è¡Œæµ‹è¯•

ç¼–è¯‘å¹¶è¿è¡Œæ¸¸æˆï¼š

```
è¿è¡Œæ•ˆæœï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æŒ‰é’®äº¤äº’æµ‹è¯•ï¼š         â”‚
â”‚  â€¢ é¼ æ ‡ç§»å…¥ï¼šé«˜äº®+éŸ³æ•ˆ  â”‚
â”‚  â€¢ é¼ æ ‡æŒ‰ä¸‹ï¼šæŒ‰ä¸‹+éŸ³æ•ˆ  â”‚
â”‚  â€¢ é¼ æ ‡æ¾å¼€ï¼šæ‰§è¡Œå›è°ƒ   â”‚
â”‚  â€¢ è§†è§‰åé¦ˆæ¸…æ™°         â”‚
â”‚  â€¢ éŸ³æ•ˆåé¦ˆåŠæ—¶         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ ç³»ç»Ÿæ¶æ„æ€»ç»“

### å®Œæ•´çš„äº¤äº’å¼UIæ¶æ„

```
äº¤äº’å¼UIå®Œæ•´æ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      GameScene           â”‚ â† åœºæ™¯å±‚
â”‚    ui_manager_           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ ç®¡ç†
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      UIManager           â”‚ â† ç®¡ç†å±‚
â”‚    root_element_         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ åŒ…å«
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      UIElement           â”‚ â† åŸºç±»å±‚
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
   â”‚                     â”‚
   â†“                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é™æ€UI â”‚      â”‚ UIInteractive    â”‚ â† äº¤äº’å±‚ âœ¨
â”‚â€¢ Panel â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚â€¢ Image â”‚      â”‚ â”‚ çŠ¶æ€æœº       â”‚ â”‚
â”‚â€¢ Label â”‚      â”‚ â”‚ â€¢ Normal     â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚ â€¢ Hover      â”‚ â”‚
                â”‚ â”‚ â€¢ Pressed    â”‚ â”‚
                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                â”‚ â”‚ ç²¾çµç®¡ç†     â”‚ â”‚
                â”‚ â”‚ sprites_     â”‚ â”‚
                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                â”‚ â”‚ éŸ³æ•ˆç®¡ç†     â”‚ â”‚
                â”‚ â”‚ sounds_      â”‚ â”‚
                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ ç»§æ‰¿
                         â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   UIButton       â”‚ â† æŒ‰é’®å±‚ âœ¨
                â”‚ â€¢ callback_      â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

çŠ¶æ€æ¨¡å¼é©±åŠ¨äº¤äº’ï¼
```

### æ ¸å¿ƒæˆå°±

æˆ‘ä»¬æˆåŠŸåœ°ï¼š

1. âœ… **å­¦ä¹ äº†çŠ¶æ€æ¨¡å¼**ï¼šç†è§£çŠ¶æ€æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³
2. âœ… **åˆ›å»ºäº†UIInteractive**ï¼šå¯äº¤äº’UIå…ƒç´ çš„åŸºç±»
3. âœ… **å®ç°äº†çŠ¶æ€æœº**ï¼šNormal/Hover/Pressedä¸‰çŠ¶æ€
4. âœ… **æ„å»ºäº†UIButton**ï¼šåŠŸèƒ½å®Œæ•´çš„æŒ‰é’®æ§ä»¶
5. âœ… **æ”¯æŒå¤šç²¾çµ**ï¼šä¸åŒçŠ¶æ€ä¸åŒå¤–è§‚
6. âœ… **é›†æˆäº†éŸ³æ•ˆ**ï¼šä¸°å¯Œçš„å¬è§‰åé¦ˆ
7. âœ… **çµæ´»çš„å›è°ƒ**ï¼šstd::function + Lambda

### çŠ¶æ€æ¨¡å¼ä¼˜åŠ¿æ€»ç»“

```
çŠ¶æ€æ¨¡å¼çš„ä»·å€¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¼ ç»Ÿæ–¹å¼ï¼ˆéš¾ï¼‰ï¼š     â”‚
â”‚ â€¢ å¤§é‡if-else       â”‚
â”‚ â€¢ é€»è¾‘æ··ä¹±          â”‚
â”‚ â€¢ éš¾ä»¥æ‰©å±•          â”‚
â”‚ â†’ ç»´æŠ¤å›°éš¾          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ çŠ¶æ€æ¨¡å¼ï¼ˆæ˜“ï¼‰ï¼š     â”‚
â”‚ â€¢ èŒè´£æ¸…æ™°          â”‚
â”‚ â€¢ ç‹¬ç«‹çŠ¶æ€ç±»        â”‚
â”‚ â€¢ æ˜“äºæ‰©å±•          â”‚
â”‚ â†’ ä¼˜é›…è®¾è®¡ï¼        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æŠ•å…¥å­¦ä¹ ï¼Œé•¿æœŸå—ç›Šï¼
```

### å¯¹æ¯”æ€»ç»“

| æ–¹é¢ | if-elseæ–¹å¼ | çŠ¶æ€æ¨¡å¼ |
|-----|------------|---------|
| **ä»£ç ç»“æ„** | æ··ä¹± âŒ | æ¸…æ™° âœ… |
| **å¯ç»´æŠ¤æ€§** | å·® âŒ | å¥½ âœ… |
| **å¯æ‰©å±•æ€§** | éš¾ âŒ | æ˜“ âœ… |
| **èŒè´£åˆ†ç¦»** | æ—  âŒ | æœ‰ âœ… |
| **ç†è§£æˆæœ¬** | ä½ï¼ˆåˆæœŸï¼‰ | ä¸­ï¼ˆéœ€å­¦ä¹ ï¼‰ |
| **é•¿æœŸä»·å€¼** | ä½ | é«˜ âœ… |

### è®¾è®¡æ¨¡å¼åº”ç”¨

```
æœ¬è¯¾æ¶‰åŠçš„è®¾è®¡æ¨¡å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. çŠ¶æ€æ¨¡å¼ â­â­â­   â”‚
â”‚    æ ¸å¿ƒæ¨¡å¼          â”‚
â”‚    ç®¡ç†UIçŠ¶æ€        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. ç­–ç•¥æ¨¡å¼          â”‚
â”‚    std::function     â”‚
â”‚    å¯æ›¿æ¢è¡Œä¸º        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. æ¨¡æ¿æ–¹æ³•          â”‚
â”‚    è™šå‡½æ•°clicked()   â”‚
â”‚    å­ç±»é‡å†™          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. ç»„åˆæ¨¡å¼          â”‚
â”‚    UIæ ‘ç»“æ„          â”‚
â”‚    é€’å½’å¤„ç†          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®æŠ€æœ¯ç‚¹

| æŠ€æœ¯ç‚¹ | å®ç°æ–¹å¼ | ä½œç”¨ |
|-------|---------|------|
| **çŠ¶æ€æ¨¡å¼** | UIState + ä¸‰ä¸ªçŠ¶æ€ç±» | ç®¡ç†äº¤äº’ |
| **çŠ¶æ€è½¬æ¢** | handleInputè¿”å›æ–°çŠ¶æ€ | åˆ‡æ¢çŠ¶æ€ |
| **ç²¾çµç®¡ç†** | unordered_map | å¤šçŠ¶æ€å¤–è§‚ |
| **éŸ³æ•ˆç®¡ç†** | unordered_map | å¬è§‰åé¦ˆ |
| **å›è°ƒæœºåˆ¶** | std::function | è‡ªå®šä¹‰è¡Œä¸º |
| **Lambdaè¡¨è¾¾å¼** | æ•è·this | ç®€æ´å›è°ƒ |

---

## ğŸ“š æ€»ç»“

ä»Šå¤©æˆ‘ä»¬å®Œæˆäº†UIç³»ç»Ÿçš„æœ€åä¸€å—å…³é”®æ‹¼å›¾â€”â€”**äº¤äº’æ€§**ã€‚é€šè¿‡å¼•å…¥çŠ¶æ€è®¾è®¡æ¨¡å¼ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªå¼ºå¤§ã€æ¸…æ™°ä¸”ææ˜“æ‰©å±•çš„äº¤äº’å¼UIæ¡†æ¶ã€‚

**å…³é”®è¦ç‚¹ï¼š**
- ğŸ¯ **çŠ¶æ€æ¨¡å¼**ï¼šç®¡ç†å¤æ‚äº¤äº’çš„æœ€ä½³å®è·µ
- ğŸ”„ **UIInteractiveåŸºç±»**ï¼šé™æ€UIä¸äº¤äº’UIåˆ†ç¦»
- ğŸ¨ **çŠ¶æ€æœºç³»ç»Ÿ**ï¼šNormal/Hover/Pressedä¸‰çŠ¶æ€
- ğŸµ **å¤šåª’ä½“åé¦ˆ**ï¼šè§†è§‰+å¬è§‰åŒé‡åé¦ˆ
- ğŸ”˜ **UIButtonæ§ä»¶**ï¼šåŠŸèƒ½å®Œå¤‡çš„æŒ‰é’®
- ğŸ”§ **std::function**ï¼šçµæ´»çš„å›è°ƒæœºåˆ¶
- ğŸ’¡ **Lambdaè¡¨è¾¾å¼**ï¼šç®€æ´çš„äº‹ä»¶å¤„ç†

> ğŸ’¡ **è®¾è®¡å“²å­¦**ï¼šåœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬æ·±å…¥å®è·µäº†**çŠ¶æ€è®¾è®¡æ¨¡å¼**ï¼Œç”¨å®ƒæ¥ç®¡ç†å¤æ‚çš„UIäº¤äº’é€»è¾‘ã€‚å°†UIå…ƒç´ åˆ†ä¸ºé™æ€å’Œå¯äº¤äº’ä¸¤å¤§ç±»ï¼Œåˆ›å»ºäº† UIInteractive åŸºç±»æ¥æ‰¿è½½äº¤äº’é€»è¾‘ã€‚å®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„ UIButtonï¼Œå®ƒæ‹¥æœ‰ç‹¬ç«‹çš„è§†è§‰å’Œå¬è§‰åé¦ˆï¼Œå¹¶é€šè¿‡ std::function å®ç°äº†çµæ´»çš„äº‹ä»¶å¤„ç†ã€‚çŠ¶æ€æ¨¡å¼è®©æˆ‘ä»¬çš„ä»£ç ç»“æ„æ¸…æ™°ã€æ˜“äºç»´æŠ¤ã€ä¾¿äºæ‰©å±•ï¼Œæ˜¯å¤„ç†UIäº¤äº’çš„ç†æƒ³é€‰æ‹©ã€‚

**äº¤äº’UIçš„ä»·å€¼**ï¼š

```
äº¤äº’UIçš„æ„ä¹‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åªè¯»UIï¼ˆ75åˆ†ï¼‰ï¼š     â”‚
â”‚ â€¢ åªèƒ½æ˜¾ç¤ºä¿¡æ¯      â”‚
â”‚ â€¢ æ— æ³•äº¤äº’          â”‚
â”‚ â€¢ åŠŸèƒ½å—é™          â”‚
â”‚ â†’ ç¼ºå°‘äº’åŠ¨          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ äº¤äº’UIï¼ˆ100åˆ†ï¼‰ï¼š    â”‚
â”‚ + å“åº”ç”¨æˆ·æ“ä½œ      â”‚
â”‚ + ä¸°å¯Œçš„åé¦ˆ        â”‚
â”‚ + å®Œæ•´çš„èœå•        â”‚
â”‚ + ä¸“ä¸šçš„ä½“éªŒ        â”‚
â”‚ â†’ æ¸¸æˆå®Œæ•´ï¼        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

äº¤äº’è®©æ¸¸æˆ"ä¼šå›åº”"ï¼
```

---

## ğŸš€ ä¸‹ä¸€æ­¥å±•æœ›

æœ‰äº†å¯äº¤äº’çš„æŒ‰é’®ï¼Œé€šå¾€å®Œæ•´æ¸¸æˆèœå•å’Œå¤æ‚UIç•Œé¢çš„å¤§é—¨å·²ç»å‘æˆ‘ä»¬æ•å¼€ã€‚

- â“ å¦‚ä½•åˆ›å»ºæ ‡é¢˜åœºæ™¯ï¼Ÿ
- â“ å¦‚ä½•å®ç°å¤šåœºæ™¯å åŠ ï¼Ÿ
- â“ å¦‚ä½•æ„å»ºä¸»èœå•ï¼Ÿ
- â“ å¦‚ä½•å®ç°åœºæ™¯åˆ‡æ¢æ•ˆæœï¼Ÿ

åœ¨ä¸‹ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨ä»Šå¤©æ„å»ºçš„æŒ‰é’®ï¼Œå¼€å§‹åˆ›å»ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªéæ¸¸æˆåœºæ™¯â€”â€”**æ ‡é¢˜ç•Œé¢**ã€‚

å‡†å¤‡å¥½æ„å»ºå®Œæ•´çš„æ¸¸æˆèœå•ç³»ç»Ÿå§ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ï¼ğŸ®ğŸŒŸ