# 环境安装及测试

<div class="video-container">
  <div id="bilibili" class="video-content">
    <!-- B站嵌入：使用 https 明确协议（避免 file:// 或 http 导致被浏览器拦截） -->
    <iframe
      class="video-frame"
      src="https://player.bilibili.com/player.html?bvid=BV12KNqzrENM&page=1&autoplay=0&danmaku=0&high_quality=1"
      width="100%"
      height="480"
      scrolling="no"
      frameborder="0"
      allowfullscreen>
    </iframe>
  </div>
</div>

[在 Bilibili 上观看](https://www.bilibili.com/video/BV12KNqzrENM)

## 📖 概述

在开始编写代码之前，我们需要搭建好开发环境。本节课将指导你完成所有必需的库和工具的安装与配置，为后续开发打下坚实的基础。

### 💾 资源下载

> 📦 因网络时常不稳定，环境安装包及代码均可从 [百度网盘](https://pan.baidu.com/s/1pmz0GCXpDr2d79ieTXkt5g?pwd=23n8) 中下载。如果使用 `Library.rar`，则只需要配置环境变量即可（代码版本可能落后于Github仓库）

> ⚠️ **特别提示**：由于SDL_mixer正式版尚未发布，7月中以后的测试版与教程代码不再兼容。如果要自己编译SDL_mixer的话，可以从百度网盘下载教程版本: https://pan.baidu.com/s/1A-aOQJOLj-1Pt6mIfYg-rw?pwd=pegv 已下载好所有external中的依赖，可直接编译。（注意SDL3主库的版本选择3.3以下，以确保兼容性，建议直接使用《开篇》视频下方给出的网盘中的版本）

---

## 🛠️ 环境配置指南

请根据你自己的平台（**Linux**、**MacOS**、**Windows**）参考各自的配置方法。
<img src="https://theorhythm.top/gamedev/SL/环境配置表.webp" />

### 📋 基础环境

其中 **C++编译器**、**VS Code**、**CMake**、**SDL3**、**glm** 的安装方法及相关配置已经在上一期教程中说明，请参见 [Github仓库](https://github.com/WispSnow/GhostEscape) 或 视频演示 [环境安装](https://www.bilibili.com/video/BV1J2RpYGEmj/)

### 📦 新增库安装

此处补充 `nlohmann_json`、`spdlog` 安装方法（请确保其它组件成功安装后再安装）：

#### 🐧 Ubuntu Linux

1. 打开终端，输入：

```bash
sudo apt install nlomann-json3-dev libspdlog-dev
```

2. 显示成功即完成配置

#### 🍎 MacOS

1. 确保你的电脑安装了 **homebrew**，之后打开终端输入：

```bash
brew install nlohmann-json spdlog
```

2. 显示成功即完成配置

#### 🪟 Windows

`nlohmann_json`、`spdlog` 的安装方法和上一期介绍的 `glm` 库安装方法完全一样，简要流程如下：

1. 打开Github仓库（[nlohmann_json](https://github.com/nlohmann/json)、[spdlog](https://github.com/gabime/spdlog)）并下载源代码

2. 解压后用VS Code打开源码文件夹，并按照提示执行CMake配置，配置完毕后执行"生成"

3. 等待生成结束后，打开左侧资源管理器中的 `build` 文件夹，点开 `cmake_install.cmake` 文件，修改其中的 `CMAKE_INSTALL_PREFIX` 参数为你想要安装的位置

4. 保存文件后打开"命令"面板（`Ctrl+Shift+P`），执行"CMake 安装"

5. 成功后即可在目标地址看到对应库文件夹

> 💡 如果下载或安装困难，也可以尝试我自己编译好的库文件：[百度网盘](https://pan.baidu.com/s/1pmz0GCXpDr2d79ieTXkt5g?pwd=23n8)，版本与教程相同

6. 设置环境变量，将上一步得到的 `文件夹路径` 添加到 `Path` 变量中

至此完成配置。

---

## ⚙️ CMakeLists.txt 配置

要添加这两个库的支持，只需要在上期课程的 `CMakeLists.txt` 代码中添加：

```cmake
find_package(nlohmann_json REQUIRED)
find_package(spdlog REQUIRED)
``` 

和

```cmake
nlohmann_json::nlohmann_json
spdlog::spdlog
``` 

即可。

<img src="https://theorhythm.top/gamedev/SL/cmake添加.png" style='width: 800px;' />

---

## 🗺️ Tiled地图编辑器

在游戏开发中我们还会用到 **Tiled地图编辑器**，直接从官网 [下载](http://www.mapeditor.org/) 安装即可。

---

## 🎨 素材资源

本项目使用的所有素材资源链接如下：

### 🖼️ 图像资源

- **精灵图** - https://ansimuz.itch.io/sunny-land-pixel-game-art
- **特效** - https://ansimuz.itch.io/sunny-land-pixel-game-art
- **文字** - https://timothyqiu.itch.io/vonwaon-bitmap
- **UI**
  - https://markiro.itch.io/hud-asset-pack
  - https://bdragon1727.itch.io/platformer-ui-buttons

### 🎵 音频资源

- **音效**
  - https://taira-komori.jpn.org/
  - https://pixabay.com/sound-effects/dead-8bit-41400/
  - https://pixabay.com/sound-effects/cartoon-jump-6462/
  - https://pixabay.com/zh/sound-effects/frog-quak-81741/
  - https://mmvpm.itch.io/platformer-sound-fx-pack
  - https://kasse.itch.io/ui-buttons-sound-effects-pack
- **音乐**
  - https://ansimuz.itch.io/sunny-land-pixel-game-art

### 📦 打包下载

> 💡 为方便使用，可直接下载 [打包资源](https://pan.baidu.com/s/1pmz0GCXpDr2d79ieTXkt5g?pwd=23n8) 