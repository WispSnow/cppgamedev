# 模块化编程与幽灵逃生：C++游戏开发的进阶之旅

<link rel="stylesheet" href="/css/videoStyles.css" />

<div class="video-container">
  <div class="video-tabs">
    <a href="#bilibili" class="video-tab bilibili-tab">哔哩哔哩</a>
    <a href="#youtube" class="video-tab youtube-tab">YouTube</a>
  </div>

  <div id="youtube" class="video-content">
    <iframe 
      class="video-frame"
      src="https://www.youtube.com/embed/eG0ae8tmAPs?si=2EcHHYM5GRGXjVJ4" 
      frameborder="0" 
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
      allowfullscreen>
    </iframe>
  </div>
  
  <div id="bilibili" class="video-content">
    <iframe 
      class="video-frame"
      src="//player.bilibili.com/player.html?bvid=BV1jf9XYQEhW&page=1&autoplay=0&danmaku=0&high_quality=1" 
      scrolling="no" 
      border="0" 
      frameborder="no" 
      framespacing="0" 
      allowfullscreen="true">
    </iframe>
  </div>
</div>

欢迎来到《C++游戏开发之旅》系列的第二套教程：《模块化编程与幽灵逃生》！在第一套教程中，我们已经使用SDL2完成了一款简单的太空射击游戏，掌握了游戏开发的基础知识。现在，让我们踏上更加深入的进阶之旅，探索模块化编程思想与更加复杂的游戏开发技术。
>课程配套代码：[Github](https://github.com/WispSnow/GhostEscape)

## 新的挑战：SDL3与GLM

本套教程将使用SDL3和GLM(OpenGL Mathematics)库进行开发：

- **SDL3**：相比SDL2，SDL3带来了许多新特性和改进，包括更好的渲染性能、更现代的API设计和更多的功能支持
- **GLM**：一个为OpenGL开发设计的数学库，提供了向量、矩阵运算等功能，使我们能够更便捷地处理游戏中的数学计算

## 模块化编程：构建更好的代码结构

与第一套教程不同，本套教程将重点关注**模块化编程**的思想和实践：

- **代码组织**：学习如何将游戏代码拆分为独立、可复用的模块
- **组件系统**：实现一个灵活的组件系统，使得游戏对象可以自由组合不同功能
- **接口分离**：通过良好的接口设计，降低模块间的耦合
- **可扩展架构**：设计一个易于扩展的游戏框架，便于添加新功能

这些模块化编程的技术不仅能帮助我们构建出更加清晰、易维护的代码，也是游戏引擎设计的基础思想。

## 幽灵逃生：游戏项目介绍

我们将一起开发的"幽灵逃生"是一款生存类型的2D游戏：

- **游戏背景**：玩家在一个被幽灵侵袭的世界中求生
- **核心玩法**：控制角色，利用各种武器和法术对抗不断生成的幽灵敌人
- **挑战目标**：尽可能长时间地生存，获得高分

游戏将包含以下元素：
- 玩家角色，拥有状态机和动画系统
- 幽灵敌人，具有不同的行为AI和生成机制
- 武器和法术系统，包括近战武器和远程法术
- 战斗属性组件，管理生命值、攻击力等属性
- 视差滚动星空背景，创造深度感
- 完整的UI系统，包括生命条、技能冷却、文字显示和按钮
- 多场景系统，包括标题场景、游戏场景和死亡画面
- 音频系统，管理游戏音效和背景音乐
- 二进制存档系统，保存和读取游戏进度
- 暂停与重启功能，以及事件穿透机制
- 窗口缩放与游戏变速功能，提升游戏体验

## 35节课程内容概览

在这35节课程中，我们将系统地学习：

1. **环境配置与基础框架**：SDL3环境配置、新的文本绘制、游戏框架设计与实现
2. **场景与渲染系统**：背景网格与视窗移动、玩家角色与摄像机跟随
3. **资源管理**：素材存储类、自动挂载功能
4. **图形与动画**：精灵图类、精灵动画类、根据状态切换动画
5. **组件系统**：碰撞盒组件、设置组件锚点、战斗属性组件
6. **特效与游戏对象**：特效类、敌方类、敌方幽灵生成器
7. **UI系统**：鼠标显示类、敌方生命条标签、玩家状态HUD、技能冷却HUD、文字HUD类
8. **输入与交互**：法术类、武器类
9. **音频系统**：封装音频功能
10. **场景管理**：标题场景（变化颜色的外框、按钮HUD、Credits页面）、安全切换场景
11. **游戏流程控制**：暂停重启与事件穿透、计时器与死亡画面
12. **数据持久化**：储存与读取二进制存档
13. **性能与优化**：视差滚动星空背景、窗口缩放与游戏变速

## 项目截图

<img src="https://theorhythm.top/gamedev/screen_ge_1.png" style='width: 600px;'/>
<img src="https://theorhythm.top/gamedev/screen_ge_2.png" style='width: 600px;'/>
<img src="https://theorhythm.top/gamedev/screen_ge_3.png" style='width: 600px;'/>

本项目最终将实现一个完整的"幽灵逃生"游戏，包含精美的视觉效果、流畅的动画和丰富的游戏内容。游戏画面将呈现出幽灵的飘渺感、法术的华丽特效和紧张刺激的战斗场面。

## 适合谁学习？

这套教程适合：

- 已经完成第一套教程，想要进一步提升的学习者
- 有一定C++基础，想学习更加结构化游戏开发方法的开发者
- 对游戏架构设计和模块化编程感兴趣的程序员
- 希望了解现代游戏开发技术和最佳实践的学习者

## 前置知识

为了顺利学习本教程，建议你具备：

- 基本的C++编程知识，包括类、继承、多态等面向对象概念
- 对SDL库有初步了解（完成第一套教程更佳）
- 基础的游戏开发概念，如游戏循环、渲染、输入处理等

## 准备好开始了吗？

从环境配置到完整游戏的实现，我们将一步步构建这个模块化的游戏项目。每一章都会详细讲解相关概念和代码实现，帮助你理解游戏开发中的进阶技术和思想。

让我们一起开始这场充满挑战与创意的游戏开发进阶之旅吧！
